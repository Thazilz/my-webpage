<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YEM Inventory System</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    form { max-width: 400px; margin: auto; }
    input, textarea { width: 100%; margin-bottom: 10px; padding: 8px; }
    button { padding: 10px 20px; }
    .success { color: green; }
    .error { color: red; }
    #messagesList { max-width: 400px; margin: 20px auto; }
    #messagesList h3 { margin-bottom: 10px; }
    #messagesList ul { list-style-type: none; padding-left: 0; }
    #messagesList li { background: #f9f9f9; margin-bottom: 8px; padding: 10px; border-radius: 4px; }
    #messagesList li strong { display: block; margin-bottom: 5px; }
  </style>
</head>
<body>
  
<nav>
  <a href="index.html">Home</a> |
  <a href="inventory.html">Inventory</a> |
  <a href="loan.html">Loan</a> |
  <a href="return.html">Return</a> |
  <a href="contact.html">Contact</a>
</nav>

<p style="text-align: center; font-size: 1.2em; margin-top: 20px;">
  <strong>Welcome to Yokogawa Inventory Records website</strong><br>
  Please select one of the following pages at the top left to continue.
</p>

<!-- üîò NFC Scan Button -->
<div style="text-align: center; margin-top: 30px;">
  <button onclick="startNFC()">üì≤ Scan NFC Tag</button>
</div>

<!-- üß™ Optional Test Fields -->
<form style="max-width: 400px; margin: 20px auto;">
  <label>Item ID:</label>
  <input type="text" id="itemId" readonly />
  <label>Item Name:</label>
  <input type="text" id="itemName" readonly />
</form>

<!-- ‚úÖ Script goes here -->
<script>
async function startNFC() {
  if ('NDEFReader' in window) {
    try {
      const ndef = new NDEFReader();
      await ndef.scan();
      console.log("üì° NFC scan started. Tap an NFC tag...");

      ndef.onreading = event => {
        const decoder = new TextDecoder();
        const { message, serialNumber } = event;

        console.log(`üîç Tag ID: ${serialNumber}`);
        const itemIdInput = document.getElementById('itemId');
        if (itemIdInput) itemIdInput.value = serialNumber;

        for (const record of message.records) {
          if (record.recordType === "text") {
            const text = decoder.decode(record.data);
            console.log(`üì¶ Tag text: ${text}`);
            const itemNameInput = document.getElementById('itemName');
            if (itemNameInput) itemNameInput.value = text;
          }
        }
      };

    } catch (error) {
      console.error("‚ùå NFC error:", error);
      alert("‚ö†Ô∏è NFC scanning failed or is not supported.");
    }
  } else {
    alert("‚ùå Web NFC is not supported in this browser.");
  }
}
</script>

</body>
</html>






